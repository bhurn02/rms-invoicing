<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Meter Reading - Troubleshooting Guide</title>
    
    <!-- Bootstrap 5.3+ CSS -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/css/custom-theme.css" rel="stylesheet">
    
    <style>
        .troubleshoot-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .issue-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .issue-header {
            padding: 1rem 1.5rem;
            font-weight: 600;
            color: white;
        }
        .issue-content {
            padding: 1.5rem;
        }
        .severity-critical {
            background: linear-gradient(135deg, #dc2626, #ef4444);
        }
        .severity-high {
            background: linear-gradient(135deg, #ea580c, #f97316);
        }
        .severity-medium {
            background: linear-gradient(135deg, #d97706, #f59e0b);
        }
        .severity-low {
            background: linear-gradient(135deg, #059669, #10b981);
        }
        .solution-step {
            background: #f8fafc;
            border-left: 4px solid #1e40af;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-note {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .success-note {
            background: #d1fae5;
            border: 1px solid #10b981;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .code-example {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container-fluid py-4">
        <div class="troubleshoot-container">
            <!-- Header -->
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold text-primary mb-2">
                    <i class="bi bi-tools me-3"></i>Troubleshooting Guide
                </h1>
                <p class="lead text-muted">Solutions for Common QR Meter Reading Issues</p>
                <div class="badge bg-warning fs-6">Technical Support Reference</div>
            </div>
            
            <!-- Quick Navigation -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="bi bi-camera-video text-primary fs-3"></i>
                            <h6 class="mt-2">Camera Issues</h6>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="bi bi-qr-code-scan text-success fs-3"></i>
                            <h6 class="mt-2">Scanning Issues</h6>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="bi bi-wifi text-warning fs-3"></i>
                            <h6 class="mt-2">Network Issues</h6>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="bi bi-person-x text-danger fs-3"></i>
                            <h6 class="mt-2">Access Issues</h6>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Camera Issues -->
            <div class="issue-card">
                <div class="issue-header severity-high">
                    <h4 class="mb-0">
                        <i class="bi bi-camera-video me-2"></i>Camera Not Working
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> Camera doesn't start or shows black screen when trying to scan QR codes.</p>
                    
                    <h6 class="mt-4 mb-3">Solutions (try in order):</h6>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-1-circle-fill me-2 text-primary"></i>Check Browser Permissions
                        </h6>
                        <p class="mb-0">Ensure your browser has permission to access the camera. Look for a camera icon in the address bar and click "Allow" if prompted.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-2-circle-fill me-2 text-primary"></i>Close Other Applications
                        </h6>
                        <p class="mb-0">Close any other applications that might be using the camera (video calls, other camera apps, etc.).</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-3-circle-fill me-2 text-primary"></i>Refresh the Page
                        </h6>
                        <p class="mb-0">Refresh the browser page and try starting the scanner again.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-4-circle-fill me-2 text-primary"></i>Check Camera Hardware
                        </h6>
                        <p class="mb-0">Test the camera with another application to ensure it's working properly.</p>
                    </div>
                    
                    <div class="warning-note">
                        <h6 class="mb-2">
                            <i class="bi bi-exclamation-triangle me-2"></i>Still Not Working?
                        </h6>
                        <p class="mb-0">Try using a different browser or contact IT support for device-specific issues.</p>
                    </div>
                </div>
            </div>
            
            <!-- QR Code Scanning Issues -->
            <div class="issue-card">
                <div class="issue-header severity-medium">
                    <h4 class="mb-0">
                        <i class="bi bi-qr-code-scan me-2"></i>QR Code Not Scanning
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> Camera is working but QR codes are not being detected or processed.</p>
                    
                    <h6 class="mt-4 mb-3">Solutions:</h6>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-sun me-2 text-warning"></i>Improve Lighting
                        </h6>
                        <p class="mb-0">Ensure adequate lighting on the QR code. Avoid shadows and glare. Use a flashlight if necessary.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-hand-index me-2 text-primary"></i>Hold Device Steady
                        </h6>
                        <p class="mb-0">Hold your device steady and at the right distance (6-12 inches from the QR code).</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-arrow-repeat me-2 text-success"></i>Try Different Angles
                        </h6>
                        <p class="mb-0">Move your device to different angles - sometimes QR codes scan better from the side or slightly above.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-brush me-2 text-info"></i>Clean the QR Code
                        </h6>
                        <p class="mb-0">Clean the QR code if it's dirty, dusty, or damaged. Use a soft cloth to remove debris.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-zoom-in me-2 text-secondary"></i>Adjust Distance
                        </h6>
                        <p class="mb-0">Move closer or farther away from the QR code. The optimal distance varies by device and QR code size.</p>
                    </div>
                    
                    <div class="warning-note">
                        <h6 class="mb-2">
                            <i class="bi bi-exclamation-triangle me-2"></i>QR Code Quality Issues
                        </h6>
                        <p class="mb-0">If the QR code is damaged, faded, or poorly printed, contact your administrator to generate a new one.</p>
                    </div>
                </div>
            </div>
            
            <!-- Form Not Auto-Populating -->
            <div class="issue-card">
                <div class="issue-header severity-medium">
                    <h4 class="mb-0">
                        <i class="bi bi-file-text me-2"></i>Form Not Auto-Populating
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> QR code scans successfully but the form doesn't populate with tenant information.</p>
                    
                    <h6 class="mt-4 mb-3">Possible Causes & Solutions:</h6>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-qr-code me-2 text-primary"></i>Invalid QR Code Format
                        </h6>
                        <p class="mb-0">Check if the QR code contains the correct format: <code>PropertyCode|UnitNumber|MeterID</code></p>
                        <div class="code-example">
                            Correct Format: GCA|101|M001
                            Incorrect Format: GCA-101-M001 or GCA 101 M001
                        </div>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-person-x me-2 text-warning"></i>No Active Tenant
                        </h6>
                        <p class="mb-0">The property/unit combination doesn't have an active tenant assigned. Contact your administrator to verify tenant assignment.</p>
                    </div>
                    
                    <div class="solution-step">
                            <i class="bi bi-database me-2 text-info"></i>Database Connection Issue
                        </h6>
                        <p class="mb-0">Check your internet connection. The system needs to connect to the database to retrieve tenant information.</p>
                    </div>
                    
                    <div class="success-note">
                        <h6 class="mb-2">
                            <i class="bi bi-lightbulb me-2"></i>Manual Entry Option
                        </h6>
                        <p class="mb-0">If auto-population fails, you can manually enter the Property ID and Unit Number, then proceed with the meter reading.</p>
                    </div>
                </div>
            </div>
            
            <!-- Network Issues -->
            <div class="issue-card">
                <div class="issue-header severity-low">
                    <h4 class="mb-0">
                        <i class="bi bi-wifi-off me-2"></i>Network Connection Issues
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> No internet connection or slow network affecting the system.</p>
                    
                    <div class="success-note">
                        <h6 class="mb-2">
                            <i class="bi bi-check-circle me-2"></i>Offline Mode Available
                        </h6>
                        <p class="mb-0">The system works offline! Your readings will be saved locally and automatically synced when the connection is restored.</p>
                    </div>
                    
                    <h6 class="mt-4 mb-3">What Happens Offline:</h6>
                    <ul>
                        <li>Readings are saved to your device</li>
                        <li>Red dot appears on your user avatar</li>
                        <li>Offline indicator shows in navigation</li>
                        <li>Data syncs automatically when online</li>
                        <li>No data loss - everything is preserved</li>
                    </ul>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-wifi me-2 text-success"></i>Check Connection
                        </h6>
                        <p class="mb-0">Verify your device's internet connection. Try accessing other websites to confirm connectivity.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-arrow-clockwise me-2 text-primary"></i>Manual Sync
                        </h6>
                        <p class="mb-0">If you have pending offline readings, look for the sync button in the navigation bar to manually trigger synchronization.</p>
                    </div>
                </div>
            </div>
            
            <!-- Sync Issues -->
            <div class="issue-card">
                <div class="issue-header severity-medium">
                    <h4 class="mb-0">
                        <i class="bi bi-arrow-clockwise me-2"></i>Sync Issues
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> Offline readings not syncing or sync failing repeatedly.</p>
                    
                    <h6 class="mt-4 mb-3">Status Indicators:</h6>
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <div class="badge bg-success fs-6 p-2 mb-2">Green Dot</div>
                            <p class="small">Online & Synced</p>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="badge bg-danger fs-6 p-2 mb-2">Red Dot</div>
                            <p class="small">Offline</p>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="badge bg-warning fs-6 p-2 mb-2">Orange Dot</div>
                            <p class="small">Pending Sync</p>
                        </div>
                    </div>
                    
                    <h6 class="mt-4 mb-3">Solutions:</h6>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-wifi me-2 text-success"></i>Check Connection Stability
                        </h6>
                        <p class="mb-0">Ensure you have a stable internet connection. The system checks connection stability before auto-sync to prevent data loss.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-arrow-clockwise me-2 text-primary"></i>Manual Sync
                        </h6>
                        <p class="mb-0">Click the sync button in the navigation bar to manually trigger synchronization of pending readings.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-hourglass-split me-2 text-warning"></i>Wait for Auto-Sync
                        </h6>
                        <p class="mb-0">The system automatically retries sync when connection becomes stable. You'll see progress indicators during sync.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-exclamation-triangle me-2 text-danger"></i>Sync Failed
                        </h6>
                        <p class="mb-0">If sync fails, your readings remain safely stored offline. The system will retry automatically or you can use manual sync.</p>
                    </div>
                    
                    <div class="warning-note">
                        <h6 class="mb-2">
                            <i class="bi bi-info-circle me-2"></i>Smart Sync Features
                        </h6>
                        <ul class="mb-0">
                            <li>Connection stability check prevents data loss</li>
                            <li>Duplicate prevention with unique IDs</li>
                            <li>Progress indicators show sync status</li>
                            <li>Failed readings stay in queue for retry</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Access Denied Issues -->
            <div class="issue-card">
                <div class="issue-header severity-critical">
                    <h4 class="mb-0">
                        <i class="bi bi-person-x me-2"></i>Access Denied
                    </h4>
                </div>
                <div class="issue-content">
                    <p><strong>Problem:</strong> Cannot access the QR Meter Reading System or specific features.</p>
                    
                    <h6 class="mt-4 mb-3">Common Scenarios:</h6>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-person-check me-2 text-primary"></i>Login Issues
                        </h6>
                        <p class="mb-0">Verify your username and password. Check for typos and ensure Caps Lock is not enabled.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-shield-x me-2 text-warning"></i>Permission Issues
                        </h6>
                        <p class="mb-0">Your account may not have QR Meter Reading permissions. Contact your system administrator to request access.</p>
                    </div>
                    
                    <div class="solution-step">
                        <h6 class="mb-2">
                            <i class="bi bi-clock me-2 text-info"></i>Session Expired
                        </h6>
                        <p class="mb-0">Your session may have expired. Try logging out and logging back in.</p>
                    </div>
                    
                    <div class="warning-note">
                        <h6 class="mb-2">
                            <i class="bi bi-exclamation-triangle me-2"></i>Contact Administrator
                        </h6>
                        <p class="mb-0">If you continue to have access issues, contact your system administrator with your username and the specific error message.</p>
                    </div>
                </div>
            </div>
            
            <!-- Error Messages Reference -->
            <div class="issue-card">
                <div class="issue-header severity-medium">
                    <h4 class="mb-0">
                        <i class="bi bi-exclamation-triangle me-2"></i>Common Error Messages
                    </h4>
                </div>
                <div class="issue-content">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-danger">"No Active Tenant Found"</h6>
                            <p class="small">The property/unit doesn't have an active tenant assigned.</p>
                            <p class="small"><strong>Solution:</strong> Contact administrator to verify tenant assignment.</p>
                            
                            <h6 class="text-warning mt-3">"Invalid QR Code Format"</h6>
                            <p class="small">The QR code doesn't contain the expected data format.</p>
                            <p class="small"><strong>Solution:</strong> Generate a new QR code using the QR Generator.</p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-warning">"Network Error"</h6>
                            <p class="small">Connection to server is lost or unstable.</p>
                            <p class="small"><strong>Solution:</strong> Check internet connection, data will sync when restored.</p>
                            
                            <h6 class="text-info mt-3">"Camera Permission Denied"</h6>
                            <p class="small">Browser doesn't have permission to access camera.</p>
                            <p class="small"><strong>Solution:</strong> Allow camera access in browser settings.</p>
                            
                            <h6 class="text-warning mt-3">"Sync Failed"</h6>
                            <p class="small">Offline readings couldn't be uploaded to server.</p>
                            <p class="small"><strong>Solution:</strong> Check connection stability, use manual sync button.</p>
                            
                            <h6 class="text-info mt-3">"Connection Lost Notification"</h6>
                            <p class="small">Red notification appears when internet connection is lost.</p>
                            <p class="small"><strong>Solution:</strong> This is normal - continue working, data is saved offline.</p>
                            
                            <h6 class="text-success mt-3">"Connection Restored Notification"</h6>
                            <p class="small">Green notification appears when internet connection returns.</p>
                            <p class="small"><strong>Solution:</strong> This is normal - sync will start automatically.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Prevention Tips -->
            <div class="issue-card">
                <div class="issue-header severity-low">
                    <h4 class="mb-0">
                        <i class="bi bi-shield-check me-2"></i>Prevention Tips
                    </h4>
                </div>
                <div class="issue-content">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary">Before Starting Work</h6>
                            <ul class="small">
                                <li>Test camera and scanner functionality</li>
                                <li>Check internet connection</li>
                                <li>Ensure device is charged</li>
                                <li>Verify login credentials</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-success">During Work</h6>
                            <ul class="small">
                                <li>Keep device steady when scanning</li>
                                <li>Ensure good lighting conditions</li>
                                <li>Clean QR codes before scanning</li>
                                <li>Double-check meter readings</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="text-center mt-5">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="bi bi-headset me-2"></i>Still Need Help?
                        </h5>
                        <p class="card-text">Contact your system administrator or IT support team with specific error details.</p>
                        <div class="row">
                            <div class="col-md-4">
                                <a href="index.html" class="btn btn-outline-primary">
                                    <i class="bi bi-book me-2"></i>Full Manual
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="quick-reference.html" class="btn btn-outline-success">
                                    <i class="bi bi-lightning-charge me-2"></i>Quick Reference
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="../index.php" class="btn btn-outline-info">
                                    <i class="bi bi-qr-code-scan me-2"></i>Back to Scanner
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
</body>
</html>
